import{j as e}from"./charts-DKGMT1ng.js";import{r as n}from"./react-DGBwUpAK.js";const g="team_document_templates",c=["Cadrage","Terrain","Analyse","Restitution","Opérationnel"],v={Cadrage:"cadrage",Terrain:"terrain",Analyse:"analyse",Restitution:"restitution",Opérationnel:"operationnel"};function h(s){return c.includes(s)}function k(){if(typeof window>"u")return[];const s=window.localStorage.getItem(g);if(!s)return[];try{const a=JSON.parse(s);return Array.isArray(a)?a.filter(l=>typeof l?.id=="string"&&typeof l?.title=="string"&&typeof l?.url=="string"&&typeof l?.category=="string"&&h(l.category)):[]}catch{return[]}}function C(){const[s,a]=n.useState(()=>k()),[l,d]=n.useState(""),[m,u]=n.useState(""),[x,f]=n.useState("Cadrage"),[p,i]=n.useState(null);n.useEffect(()=>{window.localStorage.setItem(g,JSON.stringify(s))},[s]);const b=n.useMemo(()=>c.map(t=>({category:t,links:s.filter(r=>r.category===t)})),[s]),y=t=>{if(t.preventDefault(),i(null),!l.trim()){i("Le titre du document est requis.");return}let r;try{r=new URL(m.trim()).toString()}catch{i("Le lien doit être une URL valide (ex: https://drive.google.com/...).");return}const o={id:crypto.randomUUID(),title:l.trim(),url:r,category:x};a(N=>[o,...N]),d(""),u("")},j=t=>{a(r=>r.filter(o=>o.id!==t))};return e.jsxs("div",{className:"space-y-10",children:[e.jsxs("header",{className:"border-b border-stone pb-10",children:[e.jsx("p",{className:"mb-4 text-xs font-bold uppercase tracking-widest text-flame",children:"Ressources"}),e.jsx("h1",{className:"mb-5 font-serif text-5xl text-ink md:text-6xl",children:"Modèles de documents"}),e.jsx("p",{className:"max-w-3xl text-lg font-light text-graphite md:text-xl",children:"Espace pour centraliser vos modèles Google Drive (guides d'entretien, plans, grilles d'analyse, decks, etc.)."})]}),e.jsxs("section",{className:"rounded-brand border border-stone bg-white p-6",children:[e.jsx("h2",{className:"mb-4 font-serif text-2xl text-ink",children:"Ajouter un lien"}),e.jsxs("form",{onSubmit:y,className:"grid gap-4 md:grid-cols-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{htmlFor:"tpl-title",className:"mb-1 block text-sm font-medium text-ink",children:"Nom du document"}),e.jsx("input",{id:"tpl-title",type:"text",value:l,onChange:t=>d(t.target.value),className:"field-input",placeholder:"Ex : Guide d'entretien découverte",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"tpl-category",className:"mb-1 block text-sm font-medium text-ink",children:"Catégorie"}),e.jsx("select",{id:"tpl-category",value:x,onChange:t=>{h(t.target.value)&&f(t.target.value)},className:"field-select",children:c.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{className:"md:col-span-4",children:[e.jsx("label",{htmlFor:"tpl-url",className:"mb-1 block text-sm font-medium text-ink",children:"URL Google Drive"}),e.jsx("input",{id:"tpl-url",type:"url",value:m,onChange:t=>u(t.target.value),className:"field-input",placeholder:"https://drive.google.com/...",required:!0})]}),p&&e.jsx("div",{className:"md:col-span-4 rounded-lg bg-danger-50 px-3 py-2 text-sm text-danger-700",children:p}),e.jsx("div",{className:"md:col-span-4",children:e.jsx("button",{type:"submit",className:"btn-primary-sm",children:"Ajouter"})})]})]}),e.jsx("section",{className:"space-y-4",children:b.map(t=>e.jsxs("article",{id:v[t.category],className:"rounded-brand border border-stone bg-white p-6 scroll-mt-28",children:[e.jsxs("div",{className:"mb-3 flex items-center justify-between gap-3",children:[e.jsx("h3",{className:"font-serif text-2xl text-ink",children:t.category}),e.jsxs("span",{className:"text-xs font-medium uppercase tracking-wide text-taupe",children:[t.links.length," lien(s)"]})]}),t.links.length===0?e.jsx("p",{className:"text-sm text-graphite",children:"Aucun document pour cette catégorie."}):e.jsx("ul",{className:"space-y-2",children:t.links.map(r=>e.jsxs("li",{className:"flex flex-wrap items-center justify-between gap-3 rounded-lg border border-stone px-3 py-2",children:[e.jsx("a",{href:r.url,target:"_blank",rel:"noreferrer",className:"text-sm font-medium text-flame hover:underline",children:r.title}),e.jsx("button",{type:"button",onClick:()=>j(r.id),className:"text-xs text-graphite hover:text-berry",children:"Supprimer"})]},r.id))})]},t.category))})]})}export{C as DocumentTemplatesPage};
