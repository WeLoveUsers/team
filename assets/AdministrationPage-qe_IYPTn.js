import{j as e}from"./charts-DKGMT1ng.js";import{r as l}from"./react-DGBwUpAK.js";const b="team_access_registry",c=["Admin","Consultant","Contributeur"],v=["Actif","Suspendu"];function y(){if(typeof window>"u")return[];const s=window.localStorage.getItem(b);if(!s)return[];try{const n=JSON.parse(s);return Array.isArray(n)?n.filter(r=>typeof r?.id=="string"&&typeof r?.name=="string"&&typeof r?.email=="string"&&c.includes(r?.role)&&v.includes(r?.status)):[]}catch{return[]}}function A(){const[s,n]=l.useState(()=>y()),[r,o]=l.useState(""),[x,u]=l.useState(""),[p,h]=l.useState("Consultant"),[f,m]=l.useState(null);l.useEffect(()=>{window.localStorage.setItem(b,JSON.stringify(s))},[s]);const g=t=>{if(t.preventDefault(),m(null),!r.trim()){m("Le nom est requis.");return}const a=x.trim().toLowerCase();if(!a){m("L'email est requis.");return}if(!a.includes("@")){m("L'email semble invalide.");return}if(s.some(d=>d.email===a)){m("Un compte avec cet email existe déjà.");return}const i={id:crypto.randomUUID(),name:r.trim(),email:a,role:p,status:"Actif"};n(d=>[i,...d]),o(""),u(""),h("Consultant")},j=t=>{n(a=>a.map(i=>i.id!==t?i:{...i,status:i.status==="Actif"?"Suspendu":"Actif"}))},N=t=>{n(a=>a.filter(i=>i.id!==t))};return e.jsxs("div",{className:"space-y-10",children:[e.jsxs("header",{className:"border-b border-stone pb-10",children:[e.jsx("p",{className:"mb-4 text-xs font-bold uppercase tracking-widest text-flame",children:"Administration"}),e.jsx("h1",{className:"mb-5 font-serif text-5xl text-ink md:text-6xl",children:"Gestion des accès"}),e.jsx("p",{className:"max-w-3xl text-lg font-light text-graphite md:text-xl",children:"Répertoire interne des membres ayant accès à l'interface Team."})]}),e.jsx("section",{className:"rounded-brand border border-flame/20 bg-wash p-5",children:e.jsx("p",{className:"text-sm leading-relaxed text-graphite",children:"L'authentification API actuelle reste configurée côté worker. Cette section vous permet de centraliser et piloter la liste d'accès de l'équipe au quotidien."})}),e.jsxs("section",{className:"rounded-brand border border-stone bg-white p-6",children:[e.jsx("h2",{className:"mb-4 font-serif text-2xl text-ink",children:"Ajouter un compte"}),e.jsxs("form",{onSubmit:g,className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"admin-name",className:"mb-1 block text-sm font-medium text-ink",children:"Nom"}),e.jsx("input",{id:"admin-name",type:"text",value:r,onChange:t=>o(t.target.value),className:"field-input",placeholder:"Prénom Nom",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"admin-email",className:"mb-1 block text-sm font-medium text-ink",children:"Email"}),e.jsx("input",{id:"admin-email",type:"email",value:x,onChange:t=>u(t.target.value),className:"field-input",placeholder:"nom@weloveusers.com",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"admin-role",className:"mb-1 block text-sm font-medium text-ink",children:"Rôle"}),e.jsx("select",{id:"admin-role",value:p,onChange:t=>{c.includes(t.target.value)&&h(t.target.value)},className:"field-select",children:c.map(t=>e.jsx("option",{value:t,children:t},t))})]}),f&&e.jsx("div",{className:"md:col-span-3 rounded-lg bg-danger-50 px-3 py-2 text-sm text-berry",children:f}),e.jsx("div",{className:"md:col-span-3",children:e.jsx("button",{type:"submit",className:"btn-primary-sm",children:"Ajouter le compte"})})]})]}),e.jsxs("section",{className:"rounded-brand border border-stone bg-white p-6",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h2",{className:"font-serif text-2xl text-ink",children:"Comptes enregistrés"}),e.jsxs("span",{className:"text-xs font-medium uppercase tracking-wide text-taupe",children:[s.length," compte(s)"]})]}),s.length===0?e.jsx("p",{className:"text-sm text-graphite",children:"Aucun compte ajouté pour le moment."}):e.jsx("ul",{className:"space-y-2",children:s.map(t=>e.jsxs("li",{className:"flex flex-wrap items-center justify-between gap-3 rounded-lg border border-stone px-3 py-2",children:[e.jsxs("div",{className:"min-w-[220px]",children:[e.jsx("p",{className:"text-sm font-medium text-ink",children:t.name}),e.jsx("p",{className:"text-xs text-graphite",children:t.email})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-taupe",children:t.role}),e.jsx("span",{className:`badge-severity ${t.status==="Actif"?"badge-severity-sage":"badge-severity-flame"}`,children:t.status})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{type:"button",onClick:()=>j(t.id),className:"text-xs text-flame hover:underline",children:t.status==="Actif"?"Suspendre":"Réactiver"}),e.jsx("button",{type:"button",onClick:()=>N(t.id),className:"text-xs text-graphite hover:text-berry",children:"Supprimer"})]})]},t.id))})]})]})}export{A as AdministrationPage};
