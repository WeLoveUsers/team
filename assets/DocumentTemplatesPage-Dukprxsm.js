import{j as e}from"./charts-nuwTBMFx.js";import{f as b,r,e as j}from"./react-DGBwUpAK.js";import{a as x,b as N,c as T,D as E,h as w}from"./App-B89YLWUl.js";import"./index-CZSJIl98.js";import"./api-DYJm7ZOt.js";function y(n){return n?w[n]??null:null}function _(){const{phase:n}=b(),l=y(n),i=x(),[m,d]=r.useState(()=>i??[]),[h,c]=r.useState(!i),[p,u]=r.useState(null);r.useEffect(()=>{let s=!0;const t=x(),g=N(a=>{s&&(d(a??[]),c(!1))});return t||T().then(a=>{s&&(d(a),c(!1),u(null))}).catch(a=>{s&&(u(a instanceof Error?a.message:"Impossible de charger les modèles"),c(!1))}),()=>{s=!1,g()}},[]);const f=r.useMemo(()=>{const s=new Map;for(const t of E)s.set(t,[]);for(const t of m)s.get(t.phase)?.push(t);return s},[m]);if(!l)return e.jsx(j,{to:"/modeles-documents/preparation",replace:!0});const o=f.get(l)??[];return e.jsxs("div",{className:"mx-auto w-full max-w-5xl space-y-10",children:[e.jsxs("header",{className:"border-b border-stone pb-10",children:[e.jsx("p",{className:"mb-4 text-xs font-bold uppercase tracking-widest text-flame",children:"Ressources"}),e.jsx("h1",{className:"mb-5 font-serif text-5xl text-ink md:text-6xl",children:"Modèles de documents"}),e.jsx("p",{className:"max-w-3xl text-lg font-light text-graphite md:text-xl",children:"Bibliothèque centralisée des modèles Google Drive par phase de mission."})]}),e.jsxs("section",{className:"rounded-brand border border-stone bg-white p-6",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between gap-3",children:[e.jsx("h2",{className:"font-serif text-2xl text-ink",children:l}),e.jsxs("span",{className:"text-xs font-medium uppercase tracking-wide text-taupe",children:[o.length," document(s)"]})]}),h?e.jsx("p",{className:"text-sm text-graphite",children:"Chargement..."}):p?e.jsx("p",{className:"rounded-lg bg-danger-50 px-3 py-2 text-sm text-berry",children:p}):o.length===0?e.jsx("p",{className:"text-sm text-graphite",children:"Aucun document pour cette phase."}):e.jsx("ul",{className:"space-y-2",children:o.map(s=>e.jsxs("li",{className:"flex flex-wrap items-center justify-between gap-3 rounded-lg border border-stone px-3 py-2",children:[e.jsx("a",{href:s.url,target:"_blank",rel:"noreferrer",className:"text-sm font-medium text-flame hover:underline",children:s.name}),e.jsx("span",{className:"text-xs uppercase tracking-wide text-taupe",children:s.type})]},s.id))})]})]})}export{_ as DocumentTemplatesPage};
